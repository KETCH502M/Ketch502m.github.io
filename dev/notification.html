<!DOCTYPE html>
<html lang="es">
<head>
  <script>
  if (localStorage.getItem("autenticado") !== "true") {
    window.location.href = "index.html"; // Redirige si no ha iniciado sesión
  }
</script>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Notificaciones Directas</title>
</head>
<body>
  <h1>Notificaciones Web</h1>

  <button onclick="pedirPermiso()">Pedir permiso</button>
  <button onclick="mostrarNotificacion1()">Notificación 1</button>
  <button onclick="mostrarNotificacion2()">Notificación 2</button>

  <script>
    function pedirPermiso() {
      Notification.requestPermission().then(permiso => {
        if (permiso === "granted") {
          console.log("[notif] Permiso concedido.");
          setTimeout(() => mostrarNotificacion1(), 5000);
        } else {
          console.log("[notif] Permiso denegado.");
        }
      });
    }

    function mostrarNotificacion1() {
      if (Notification.permission === "granted") {
        new Notification("Notificación 1", {
          body: "Esta es la primera notificación",
          icon: "https://cdn-icons-png.flaticon.com/512/1827/1827279.png",
          vibrate: [200, 100, 200]
        });
      }
    }

    function mostrarNotificacion2() {
      if (Notification.permission === "granted") {
        new Notification("Notificación 2", {
          body: "Esta es otra notificación más",
          icon: "https://cdn-icons-png.flaticon.com/512/1828/1828778.png",
          vibrate: [100, 50, 100]
        });
      }
    }
  </script>
</body>
</html>